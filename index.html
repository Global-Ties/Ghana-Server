<!DOCTYPE html>
<html>
<header>
    <h1>Web Crawler Example</h1>
    <link rel="stylesheet" href="index.css" />
    <script src="/socket.io/socket.io.js"></script>
</header>
<script>
    /*** WILL NEED TO LOCK SCOPE ***/
    var socket = io();

/*
    // PREVENT RELOAD MECHANIC
    window.onbeforeunload = function() {
        console.log("cancel reload");
        return "Dude, are you sure you want to leave? Think of the kittens!";
    }
*/

    socket.on("time", function(data) {
        console.log("received");
        console.log(data)
    })
</script>

<body class="body">
    <div class="container">
        <div class="dash uno"></div>
        <div class="dash dos"></div>
        <div class="dash tres"></div>
        <div class="dash cuatro"></div>
    </div>
    <h4>Youtube:
        <form onsubmit="download">
            <input id="utube_url" placeholder="youtube url"></input>
            <button type="button" onclick="download()">Download </button>
        </form>
    </h4>

    <h4>Static sites:
        <form onsubmit="regularDownload">
            <input id="url" placeholder="url"/>
            <button type="button" onclick="reg_download()">Download</button>
        </form>
    </h4>
    <button type="button" onclick="terminate()"> TERMINATE </button>

    <div id="url_display"></div>
    <div id="content_display"></div>

    
<!--
    <video width="500" height="281" controls>
        <source src="http://localhost:3000/video" type="video/mp4">
    </video>
-->
</body>

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>

    function download() {
        axios.get('http://localhost:3000/youtube?url='+document.getElementById("utube_url").value ).then( function(res) {
            document.getElementById("url_display").innerHTML = res.data;
            document.getElementById("content_display").innerHTML="<video src=\"/home/anson/Desktop/SchoolHouseGhana/myvideo.mp4\"></video>"
       });
    }

    function reg_download() {
        axios.get('http://localhost:3000/api/reg?url='+document.getElementById("url").value).then(function(res) {
            console.log(res.data);
            document.getElementById("url_display").innerHTML = res.data;
        })
    }

    function terminate() {
        console.log("terminate linked");
        socket.emit("terminate", {stop: "1"})
    }



</script>

</html>